<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Mapa Digital Twin</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link href="https://api.mapbox.com/mapbox-gl-js/v3.15.0/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v3.15.0/mapbox-gl.js"></script>
<style>
body { margin:0; padding:0; }
#map { position:absolute; top:0; bottom:0; width:100%; }
</style>
</head>
<body>

<div id="map"></div>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiYnJ1bm9wcmF4ZWRlczIxIiwiYSI6ImNtZmgzZWZjcjA3NjYyam9sZ3Jhc2Rld2sifQ.RTM-gBIflY5Y6ynbb19VFQ';

const map = new mapboxgl.Map({
  container: 'map',
  style: 'mapbox://styles/brunopraxedes21/cmfhfvlyv007r01qw4xauaoes', // seu estilo Mapbox
  center: [-118.3267, 34.0221], // centro inicial em Los Angeles
  zoom: 15,
  pitch: 60,
  bearing: -20,
  antialias: true
});

map.addControl(new mapboxgl.NavigationControl()); // zoom e rotação
map.scrollZoom.enable(); // permitir zoom com scroll
map.touchZoomRotate.enable(); // suporte ao celular

map.on('style.load', () => {
  // Relevo real
  map.addSource('mapbox-dem', {
    type: 'raster-dem',
    url: 'mapbox://mapbox.mapbox-terrain-dem-v1',
    tileSize: 512,
    maxzoom: 14
  });
  map.setTerrain({ source: 'mapbox-dem', exaggeration: 1.5 });

  // Nuvem de tráfego e clima via camadas Mapbox
  map.addLayer({
    id: 'traffic-layer',
    type: 'line',
    source: {
      type: 'vector',
      url: 'mapbox://mapbox.mapbox-traffic-v1'
    },
    'source-layer': 'traffic',
    paint: {
      'line-color': ['case',
        ['==', ['get','congestion'], 'low'], '#00FF00',
        ['==', ['get','congestion'], 'moderate'], '#FFFF00',
        ['==', ['get','con]()]()
